# Travel Planner

A comprehensive travel planning application that generates personalized itineraries using multiple LLM models and provides evaluation capabilities for travel plan quality assessment.

## Features

- **Multi-Model Support**: Integrates GPT-4.1, Llama, and DeepSeek models for travel plan generation
- **Personalized Recommendations**: Uses user activity data from the yjmob100k dataset for personalized suggestions
- **Location-Based Planning**: Leverages geographical coordinates and radius-based filtering
- **Comprehensive Evaluation**: Automated constraint-based evaluation system for travel plan quality
- **Interactive API**: RESTful API with comprehensive documentation

## Quick Start

### Development
```bash
pip install -r requirements.txt
cd app
python main.py
```

### Production Deployment
```bash
cd prod
docker-compose up
```

### Documentation
Visit `/docs` endpoint when the application is running for interactive API documentation.

## Dataset

The application uses the **yjmob100k dataset** containing:
- `yjmob100k-dataset1.csv` - User mobility data
- `yjmob100k-dataset2.csv` - Extended mobility patterns  
- `POI_datacategories.csv` - Points of interest with categories
- `cell_POIcat.csv` - Geographic cell and POI category mappings

## Architecture

### Application Structure (`/app`)

- **`main.py`** - FastAPI application entry point, route definitions, and API endpoints
- **`models.py`** - Pydantic data models for request/response validation and database schemas
- **`database.py`** - Database connection management, query execution, and data access layer
- **`utils.py`** - LLM API integration utilities for OpenAI and Groq services
- **`places.py`** - Google Places API integration for location data and POI information
- **`clustering.py`** - User activity clustering algorithms for personalization
- **`commands.py`** - CLI commands for database setup and data processing

### Test Scripts (`/test-scripts`)

- **`generate_evaluation_plans.py`** - Generates travel plans using multiple LLM models with parallel processing
- **`evaluate_travel_plans.py`** - LLM-based evaluation system that assesses travel plans against constraints
- **`analyze_evaluation_results.py`** - Results analysis and visualization, calculates micro/macro pass rates
- **`queries.csv`** - Evaluation dataset with 150 queries across easy/medium/hard difficulties
- **`categories.csv`** - POI category mappings for activity classification
- **`activities_insert.sql`** - Database schema for activity data insertion
- **`test_users.sql`** - Test user data for evaluation scenarios

### Evaluation Pipeline

1. **Plan Generation**: `generate_evaluation_plans.py` creates travel plans for 360 combinations (3 models × 2 categories × 60 queries)
2. **Plan Evaluation**: `evaluate_travel_plans.py` uses GPT-5 and Llama4 to assess plans against common sense and hard constraints
3. **Results Analysis**: `analyze_evaluation_results.py` computes metrics and generates visualizations

## Evaluation Metrics

- **Micro Pass Rate**: (Total constraints passed / Total constraints) × 100
- **Macro Pass Rate**: (Plans with all constraints passed / Total plans) × 100
- **Constraint Categories**:
  - Common Sense: Diverse attractions, complete daily info, natural timing, logical flow, realistic pacing
  - Hard Constraints: User-specific requirements from query data

## Configuration

Required environment variables:
- `OPENAI_API_KEY` - For GPT model access
- `GROQ_API_KEY` - For Llama and DeepSeek models
- `GOOGLE_PLACES_API_KEY` - For location services

## File Structure

```
travel-planner/
├── app/                    # Main application
├── dataset/               # yjmob100k dataset files
├── test-scripts/          # Evaluation and testing utilities
├── cache/                 # API response cache
├── prod/                  # Production deployment configs
└── tests/                 # Unit tests
```

## Demo Android App

A demo Android application is available to interact with the travel planner API:

- **Source Code**: [GitHub Repository](https://github.com/hasaansworld/travel-planner-app)
- **Download APK**: [travel_planner.apk](https://github.com/hasaansworld/travel-planner/releases/download/v1.0/travel_planner.apk)

The mobile app provides a user-friendly interface for:
- Creating travel plans with personalized recommendations
- Viewing interactive itineraries with maps
- Managing user preferences and history
- Real-time plan updates and modifications

## Development

The application provides comprehensive travel planning with evaluation capabilities. The evaluation pipeline processes plans generated by different LLM models and assesses them using automated constraint checking to measure planning quality across various difficulty levels.
